<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation - GreenGate</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #10B981;
            --primary-dark: #059669;
            --dark: #1F2937;
            --gray: #6B7280;
            --gray-light: #F3F4F6;
            --white: #FFFFFF;
            --code-bg: #1E293B;
            --code-text: #E2E8F0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: var(--white);
        }

        .header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 2rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .lang-switcher {
            position: absolute;
            top: 2rem;
            right: 2rem;
        }

        .lang-switcher a {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            background: rgba(255,255,255,0.2);
            border-radius: 6px;
            font-weight: 600;
        }

        .nav {
            background: var(--white);
            border-bottom: 1px solid #E5E7EB;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-list {
            display: flex;
            list-style: none;
            gap: 2rem;
            padding: 1rem 0;
        }

        .nav-list a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-list a:hover {
            color: var(--primary);
        }

        .content {
            padding: 3rem 0;
        }

        .section {
            margin-bottom: 4rem;
        }

        .section h2 {
            font-size: 2rem;
            color: var(--dark);
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 3px solid var(--primary);
        }

        .section h3 {
            font-size: 1.5rem;
            color: var(--dark);
            margin: 2rem 0 1rem;
        }

        .section h4 {
            font-size: 1.2rem;
            color: var(--primary);
            margin: 1.5rem 0 0.5rem;
        }

        .section p {
            margin-bottom: 1rem;
            color: var(--gray);
            font-size: 1.05rem;
        }

        .code-block {
            background: var(--code-bg);
            color: var(--code-text);
            padding: 1.5rem;
            border-radius: 8px;
            overflow-x: auto;
            margin: 1rem 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .inline-code {
            background: #F3F4F6;
            color: #DC2626;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9em;
        }

        .endpoint {
            background: var(--gray-light);
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            border-left: 4px solid var(--primary);
        }

        .method {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.85rem;
            margin-right: 0.5rem;
        }

        .method.post {
            background: #3B82F6;
            color: white;
        }

        .method.get {
            background: #10B981;
            color: white;
        }

        .param-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .param-table th,
        .param-table td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #E5E7EB;
        }

        .param-table th {
            background: var(--gray-light);
            font-weight: 600;
            color: var(--dark);
        }

        .param-table td {
            color: var(--gray);
        }

        .badge {
            display: inline-block;
            padding: 0.25rem 0.6rem;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge.required {
            background: #FEE2E2;
            color: #DC2626;
        }

        .badge.optional {
            background: #E0E7FF;
            color: #4F46E5;
        }

        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
        }

        .alert.info {
            background: #DBEAFE;
            border-left: 4px solid #3B82F6;
            color: #1E40AF;
        }

        .alert.warning {
            background: #FEF3C7;
            border-left: 4px solid #F59E0B;
            color: #92400E;
        }

        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            background: var(--primary);
            color: white;
            text-decoration: none;
            border-radius: 6px;
            font-weight: 600;
            transition: background 0.2s;
        }

        .btn:hover {
            background: var(--primary-dark);
        }

        .footer {
            background: var(--dark);
            color: white;
            padding: 2rem 0;
            text-align: center;
            margin-top: 4rem;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container" style="position: relative;">
            <div class="lang-switcher">
                <a href="docs.html">üáßüá∑ Portugu√™s</a>
            </div>
            <h1>üìò GreenGate API Documentation</h1>
            <p>REST API for environmental geospatial validation</p>
        </div>
    </header>

    <nav class="nav">
        <div class="container">
            <ul class="nav-list">
                <li><a href="#overview">Overview</a></li>
                <li><a href="#auth">Authentication</a></li>
                <li><a href="#endpoints">Endpoints</a></li>
                <li><a href="#examples">Examples</a></li>
                <li><a href="#errors">Errors</a></li>
            </ul>
        </div>
    </nav>

    <div class="content">
        <div class="container">
            <!-- Overview -->
            <section id="overview" class="section">
                <h2>Overview</h2>
                <p>The GreenGate API allows you to validate Brazilian rural areas against 6 official layers of environmental data, generating auditable PDF reports in under 2 minutes.</p>

                <h3>Base URL</h3>
                <div class="code-block">https://api.greengate.com.br/api/v1</div>

                <h3>Features</h3>
                <ul style="margin-left: 2rem; color: var(--gray);">
                    <li>‚úÖ <strong>6 Official Layers:</strong> PRODES, FUNAI, ICMBio, IBAMA, INCRA, Legal Amazon</li>
                    <li>‚úÖ <strong>Fast Validation:</strong> Results in under 2 minutes</li>
                    <li>‚úÖ <strong>PDF Reports:</strong> Auditable documents with QR Code</li>
                    <li>‚úÖ <strong>Risk Score:</strong> Proprietary 0-100 algorithm</li>
                    <li>‚úÖ <strong>RESTful:</strong> Standard HTTP architecture</li>
                </ul>

                <div class="alert info">
                    <strong>üí° Note:</strong> This API is in production and used by companies for EUDR compliance and environmental screening.
                </div>
            </section>

            <!-- Authentication -->
            <section id="auth" class="section">
                <h2>Authentication</h2>
                <p>The API uses <strong>API Key</strong> authentication sent in the header of each request.</p>

                <h3>Getting Your API Key</h3>
                <p>Contact us via <a href="mailto:greengate@gmail.com">greengate@gmail.com</a> or phone <strong>+5519971046171</strong> to request access.</p>

                <h3>How to Use</h3>
                <p>Include the <span class="inline-code">x-api-key</span> header in all requests:</p>

                <div class="code-block">curl -H "x-api-key: YOUR_API_KEY_HERE" \
     https://api.greengate.com.br/api/v1/validations</div>

                <div class="alert warning">
                    <strong>‚ö†Ô∏è Security:</strong> Never expose your API key in public code (frontend, Git repositories, etc). Use environment variables.
                </div>
            </section>

            <!-- Endpoints -->
            <section id="endpoints" class="section">
                <h2>Main Endpoints</h2>

                <!-- POST /validations/quick -->
                <div class="endpoint">
                    <h3>
                        <span class="method post">POST</span>
                        /validations/quick
                    </h3>
                    <p>Creates a fast geospatial validation from a GeoJSON polygon without saving to database.</p>

                    <h4>Headers</h4>
                    <table class="param-table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="inline-code">x-api-key</span> <span class="badge required">required</span></td>
                                <td>string</td>
                                <td>Your authentication key</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">Content-Type</span></td>
                                <td>string</td>
                                <td>application/json</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>Body (JSON)</h4>
                    <table class="param-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="inline-code">geometry</span> <span class="badge required">required</span></td>
                                <td>GeoJSON</td>
                                <td>Polygon in GeoJSON format (type: Polygon or MultiPolygon)</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">property_name</span> <span class="badge optional">optional</span></td>
                                <td>string</td>
                                <td>Property/farm name</td>
                            </tr>
                            <tr>
                                <td><span class="inline-code">plot_name</span> <span class="badge optional">optional</span></td>
                                <td>string</td>
                                <td>Plot/field name</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>Request Example</h4>
                    <div class="code-block">{
  "geometry": {
    "type": "Polygon",
    "coordinates": [[
      [-56.2410, -11.8956],
      [-56.2410, -11.9067],
      [-56.2521, -11.9067],
      [-56.2521, -11.8956],
      [-56.2410, -11.8956]
    ]]
  },
  "property_name": "Example Farm",
  "plot_name": "Plot 12"
}</div>

                    <h4>Response (200 OK)</h4>
                    <div class="code-block">{
  "status": "approved",
  "score": 100,
  "risk_level": "low",
  "area_ha": 163.91,
  "location": {
    "municipality": "Porto dos Ga√∫chos",
    "state": "Mato Grosso"
  },
  "checks": {
    "prodes_deforestation": {
      "status": "approved",
      "overlap_area_ha": 0.0,
      "description": "No deforestation detected post-2020"
    },
    "indigenous_lands": {
      "status": "approved",
      "overlap_area_ha": 0.0
    },
    "conservation_units": {
      "status": "approved",
      "overlap_area_ha": 0.0
    },
    "ibama_embargoes": {
      "status": "approved",
      "count": 0
    },
    "quilombola_territories": {
      "status": "approved",
      "overlap_area_ha": 0.0
    },
    "legal_amazon": {
      "inside": false
    }
  },
  "processing_time_ms": 1847
}</div>
                </div>

                <!-- POST /reports/due-diligence/quick -->
                <div class="endpoint">
                    <h3>
                        <span class="method post">POST</span>
                        /reports/due-diligence/quick
                    </h3>
                    <p>Generates a complete PDF report with validation results.</p>

                    <h4>Additional Parameters</h4>
                    <table class="param-table">
                        <thead>
                            <tr>
                                <th>Field</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="inline-code">lang</span> <span class="badge optional">optional</span></td>
                                <td>string</td>
                                <td>Report language: "pt" or "en" (default: "pt")</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>Request Example</h4>
                    <div class="code-block">{
  "geometry": { ... },
  "property_name": "Example Farm",
  "plot_name": "Plot 12",
  "lang": "en"
}</div>

                    <h4>Response (200 OK)</h4>
                    <div class="code-block">{
  "report_code": "GG-20251225150233-VUTG",
  "pdf_base64": "JVBERi0xLjQKJeLj...",
  "verification_url": "https://api.greengate.com.br/api/v1/reports/verify/GG-20251225150233-VUTG/page",
  "qr_code_base64": "iVBORw0KGgoAAAANSUhEU...",
  "validation_summary": {
    "status": "approved",
    "score": 100,
    "risk_level": "low"
  }
}</div>
                </div>

                <!-- GET /reports/verify/{code} -->
                <div class="endpoint">
                    <h3>
                        <span class="method get">GET</span>
                        /reports/verify/{report_code}
                    </h3>
                    <p>Public verification of report authenticity via QR Code.</p>

                    <div class="alert info">
                        <strong>üìå Note:</strong> This endpoint is public (no API key required) and can be accessed by anyone with the report code.
                    </div>

                    <h4>URL Parameters</h4>
                    <table class="param-table">
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Type</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span class="inline-code">report_code</span></td>
                                <td>string</td>
                                <td>Report code (format: GG-YYYYMMDDHHMMSS-XXXX)</td>
                            </tr>
                        </tbody>
                    </table>

                    <h4>Response (200 OK)</h4>
                    <div class="code-block">{
  "verified": true,
  "report_code": "GG-20251225150233-VUTG",
  "property_name": "Example Farm",
  "plot_name": "Plot 12",
  "generated_at": "2025-12-25T15:02:33Z",
  "validation_summary": {
    "status": "approved",
    "score": 100,
    "risk_level": "low",
    "area_ha": 163.91
  }
}</div>
                </div>

                <!-- GET /health -->
                <div class="endpoint">
                    <h3>
                        <span class="method get">GET</span>
                        /health
                    </h3>
                    <p>Basic health check endpoint.</p>

                    <h4>Response (200 OK)</h4>
                    <div class="code-block">{
  "status": "ok",
  "app": "GreenGate API",
  "version": "1.0.0"
}</div>
                </div>
            </section>

            <!-- Examples -->
            <section id="examples" class="section">
                <h2>Code Examples</h2>

                <h3>Python (requests)</h3>
                <div class="code-block">import requests
import base64

API_KEY = "your_api_key_here"
BASE_URL = "https://api.greengate.com.br/api/v1"

headers = {
    "x-api-key": API_KEY,
    "Content-Type": "application/json"
}

# Generate PDF report in English
payload = {
    "geometry": {
        "type": "Polygon",
        "coordinates": [[
            [-56.2410, -11.8956],
            [-56.2410, -11.9067],
            [-56.2521, -11.9067],
            [-56.2521, -11.8956],
            [-56.2410, -11.8956]
        ]]
    },
    "property_name": "Example Farm",
    "plot_name": "Plot 12",
    "lang": "en"
}

response = requests.post(
    f"{BASE_URL}/reports/due-diligence/quick",
    headers=headers,
    json=payload
)

result = response.json()

# Save PDF to file
pdf_data = base64.b64decode(result["pdf_base64"])
with open("report.pdf", "wb") as f:
    f.write(pdf_data)

print(f"Report Code: {result['report_code']}")
print(f"Verification URL: {result['verification_url']}")
print(f"Score: {result['validation_summary']['score']}/100")</div>

                <h3>JavaScript (Node.js)</h3>
                <div class="code-block">const fs = require('fs');

const API_KEY = 'your_api_key_here';
const BASE_URL = 'https://api.greengate.com.br/api/v1';

// Generate PDF report
const response = await fetch(`${BASE_URL}/reports/due-diligence/quick`, {
  method: 'POST',
  headers: {
    'x-api-key': API_KEY,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    geometry: {
      type: 'Polygon',
      coordinates: [[
        [-56.2410, -11.8956],
        [-56.2410, -11.9067],
        [-56.2521, -11.9067],
        [-56.2521, -11.8956],
        [-56.2410, -11.8956]
      ]]
    },
    property_name: 'Example Farm',
    plot_name: 'Plot 12',
    lang: 'en'
  })
});

const result = await response.json();

// Save PDF to file
const pdfBuffer = Buffer.from(result.pdf_base64, 'base64');
fs.writeFileSync('report.pdf', pdfBuffer);

console.log(`Report Code: ${result.report_code}`);
console.log(`Score: ${result.validation_summary.score}/100`);</div>

                <h3>cURL</h3>
                <div class="code-block">#!/bin/bash

API_KEY="your_api_key_here"
BASE_URL="https://api.greengate.com.br/api/v1"

# Generate PDF report
curl -X POST "$BASE_URL/reports/due-diligence/quick" \
  -H "x-api-key: $API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "geometry": {
      "type": "Polygon",
      "coordinates": [[
        [-56.2410, -11.8956],
        [-56.2410, -11.9067],
        [-56.2521, -11.9067],
        [-56.2521, -11.8956],
        [-56.2410, -11.8956]
      ]]
    },
    "property_name": "Example Farm",
    "plot_name": "Plot 12",
    "lang": "en"
  }' | jq '.'</div>
            </section>

            <!-- Errors -->
            <section id="errors" class="section">
                <h2>Error Codes</h2>

                <table class="param-table">
                    <thead>
                        <tr>
                            <th>HTTP Code</th>
                            <th>Error</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>400</strong></td>
                            <td>Bad Request</td>
                            <td>Invalid geometry or incorrect parameters</td>
                        </tr>
                        <tr>
                            <td><strong>401</strong></td>
                            <td>Unauthorized</td>
                            <td>Invalid or missing API key</td>
                        </tr>
                        <tr>
                            <td><strong>404</strong></td>
                            <td>Not Found</td>
                            <td>Validation not found</td>
                        </tr>
                        <tr>
                            <td><strong>413</strong></td>
                            <td>Payload Too Large</td>
                            <td>Geometry exceeds size limits</td>
                        </tr>
                        <tr>
                            <td><strong>422</strong></td>
                            <td>Unprocessable Entity</td>
                            <td>Geometry validation error</td>
                        </tr>
                        <tr>
                            <td><strong>429</strong></td>
                            <td>Too Many Requests</td>
                            <td>Rate limit exceeded (max 100 req/min)</td>
                        </tr>
                        <tr>
                            <td><strong>500</strong></td>
                            <td>Internal Server Error</td>
                            <td>Server internal error</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Error Response Format</h3>
                <div class="code-block">{
  "error": {
    "code": "INVALID_GEOMETRY",
    "message": "The provided polygon is not valid",
    "details": "Self-intersection detected at coordinates [-56.241, -11.8956]"
  }
}</div>

                <h3>Geometry Constraints</h3>
                <div class="alert info">
                    <strong>üìê Limits:</strong>
                    <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
                        <li>Maximum vertices: 10,000</li>
                        <li>Maximum area: 10,000 hectares</li>
                        <li>Coordinates must be within Brazil bounding box</li>
                        <li>Valid GeoJSON Polygon required</li>
                    </ul>
                </div>

                <h3>Rate Limits</h3>
                <div class="alert info">
                    <strong>üìä Limits:</strong>
                    <ul style="margin-top: 0.5rem; margin-left: 1.5rem;">
                        <li><strong>Authenticated:</strong> 100 requests per minute</li>
                        <li><strong>Anonymous:</strong> 20 requests per minute</li>
                        <li>Response headers include: <span class="inline-code">X-RateLimit-Limit</span>, <span class="inline-code">X-RateLimit-Remaining</span></li>
                    </ul>
                </div>
            </section>

            <!-- EUDR Compliance -->
            <section id="eudr" class="section">
                <h2>EUDR Compliance</h2>
                <p>The GreenGate API supports EUDR Article 9 due diligence requirements for Brazilian commodities.</p>

                <h3>What We Validate</h3>
                <ul style="margin-left: 2rem; color: var(--gray);">
                    <li>‚úÖ <strong>Plot-level deforestation analysis</strong> using PRODES (INPE) and MapBiomas Alerts</li>
                    <li>‚úÖ <strong>Indigenous lands overlap</strong> (FUNAI database)</li>
                    <li>‚úÖ <strong>Conservation units overlap</strong> (ICMBio)</li>
                    <li>‚úÖ <strong>Environmental embargoes</strong> (IBAMA)</li>
                    <li>‚úÖ <strong>Quilombola territories</strong> (INCRA)</li>
                    <li>‚úÖ <strong>Auditable PDF reports</strong> with QR code verification</li>
                </ul>

                <h3>Coverage</h3>
                <div class="alert info">
                    <strong>üåé Geographic Coverage:</strong> Currently specialized in <strong>Mato Grosso state</strong>, Brazil's largest soy-producing region (27% of Brazil's soy exports).
                </div>

                <h3>Pricing for European Market</h3>
                <p>International pricing: <strong>‚Ç¨19.90/validation</strong></p>
                <ul style="margin-left: 2rem; color: var(--gray);">
                    <li>Volume discount: 100+ validations/month = ‚Ç¨16.90</li>
                    <li>500+ validations/month = ‚Ç¨14.90</li>
                    <li>60% cost reduction vs manual analysis (‚Ç¨40-50)</li>
                </ul>

                <p style="margin-top: 1rem;">Contact us for custom enterprise pricing.</p>
            </section>

            <!-- Support -->
            <section id="support" class="section">
                <h2>Support</h2>
                <p>Need help? Get in touch:</p>
                <ul style="margin-left: 2rem; color: var(--gray);">
                    <li>üìß Email: <a href="mailto:greengate@gmail.com">greengate@gmail.com</a></li>
                    <li>üì± WhatsApp: <a href="https://wa.me/5519971046171">+55 19 97104-6171</a></li>
                    <li>üåê Website: <a href="https://www.greengate.com.br">www.greengate.com.br</a></li>
                </ul>

                <div style="margin-top: 2rem;">
                    <a href="index.html" class="btn">‚Üê Back to Home</a>
                </div>
            </section>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 GreenGate. All rights reserved.</p>
            <p style="margin-top: 0.5rem; opacity: 0.8;">Geospatial validation platform for environmental compliance</p>
        </div>
    </footer>
</body>
</html>
